## ã€Œ è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼ˆVFSï¼‰ ã€

<div align="right">
    <a href="https://github.com/fmw666/Linux#-ç›®å½•å¯¼èˆª">è¿”å›ç›®å½•å¯¼èˆª â†©</a>
</div>

<br>

&emsp;&emsp;**å®šä¹‰ï¼š** VFS(Virtual File System)ï¼Œæ˜¯å¼‚æ„æ–‡ä»¶ç³»ç»Ÿä¹‹ä¸Šçš„è½¯ä»¶ç²˜åˆå±‚ã€‚é€šè¿‡ VFS å¯ä»¥ä¸ºè®¿é—®æ–‡ä»¶ç³»ç»Ÿçš„ç³»ç»Ÿè°ƒç”¨æä¾›ç»Ÿä¸€çš„æŠ½è±¡æ¥å£ï¼Œå®ç°æ— ç¼ä½¿ç”¨å¤šä¸ªä¸åŒç±»å‹çš„æ–‡ä»¶ç³»ç»Ÿã€‚

### ğŸ’¬ è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿçš„ç‰¹ç‚¹

1. ä¸åŒæ–‡ä»¶ç³»ç»Ÿä¸æ˜¯é€šè¿‡è®¾å¤‡æ ‡è¯†ç¬¦è®¿é—®ï¼Œè€Œæ˜¯è¿æˆä¸€ä¸ªå•ä¸€æ ‘å‹ç»“æ„ï¼Œç”¨ä¸€ä¸ªæ ¹ç›®å½•è¡¨ç¤ºæ–‡ä»¶ç³»ç»Ÿï¼›

1. æ–‡ä»¶ç³»ç»ŸæŒ‰éœ€æŒ‚è½½åœ¨ Linux è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼›

1. é‡‡ç”¨æ ‡å‡†çš„ UNIXï¼ˆPOSIXï¼‰ç³»ç»Ÿè°ƒç”¨è¯»ã€å†™ä½äºä¸åŒç‰©ç†ä»‹è´¨ä¸Šçš„æ–‡ä»¶ç³»ç»Ÿï¼›

1. ç”¨æˆ·å¾ˆå®¹æ˜“åœ°åœ¨ä¸åŒæ–‡ä»¶ç³»ç»Ÿä¹‹é—´è¿›è¡Œæ•°æ®äº¤æ¢å’Œç®¡ç†ï¼Œå¹¶åœ¨ Linux ä¸Šä»»æ„æŒ‚è½½å¤šç§ä¸åŒç±»å‹æ–‡ä»¶ç³»ç»Ÿã€‚

+ ***ä¾‹1ï¼š*** cdrom åœ¨ Linux ä¸­çš„æŒ‚è½½ï¼š

	```shell
	mount -t iso9660 /dev/cdrom /mnt/cdrom
	```

+ ***ä¾‹2ï¼š*** nfs åœ¨ Linux ä¸­çš„æŒ‚è½½ï¼š

	```shell
	mount -t nfs 127.0.0.1:/mnt/nfs /mnt/nfs
	```

### ğŸ’¬ æ–‡ä»¶çš„è®¿é—®æ–¹å¼

+ **ç³»ç»Ÿè°ƒç”¨â€”â€”éç¼“å†²æ–‡ä»¶æ“ä½œ**

	+ åŸºäºPOSIX(Portable Operating System Interface)æ ‡å‡†ï¼Œé‡‡ç”¨Cè¯­è¨€ï¼Œå®ç°äº†ä¸ºåº”ç”¨ç¨‹åºæä¾›ä¸æ“ä½œç³»ç»Ÿå†…æ ¸é€šä¿¡çš„æœåŠ¡API.

	+ ä¸ºç”¨æˆ·æä¾›æœ‰å…³æ“ä½œç³»ç»Ÿçš„è®¾å¤‡ç®¡ç†ã€I/O ç³»ç»Ÿã€æ–‡ä»¶ç³»ç»Ÿå’Œè¿›ç¨‹æ§åˆ¶ã€é€šä¿¡åŠå­˜å‚¨ç®¡ç†ç­‰æ–¹é¢çš„åŠŸèƒ½.

+ **ANSI Cåº“å‡½æ•°â€”â€”ç¼“å†²æ–‡ä»¶æ“ä½œ**

	+ ç¨‹åºå‘˜åœ¨ç¼–ç¨‹æ—¶ï¼Œåˆ©ç”¨ Cåº“è®©æ“ä½œç³»ç»Ÿä¸ºå…¶æä¾›æ–‡ä»¶è®¿é—®ç­‰æœåŠ¡ã€‚

### ğŸ’¬ POSIX æ–‡ä»¶è®¿é—®è°ƒç”¨

+ **æ–‡ä»¶æµå’Œæ–‡ä»¶æè¿°ç¬¦**

	+ **æ–‡ä»¶æµï¼šstdinã€stdoutã€stderr**

	+ åŠŸèƒ½1ï¼šå®ç°ä¸åŒè¾“å…¥è¾“å‡ºæ ¼å¼è½¬æ¢

	+ åŠŸèƒ½2ï¼šç¼“å†²åŠŸèƒ½ï¼Œå°†æ•°æ®è¯»å†™é›†ä¸­ï¼Œå‡å°‘ç³»ç»Ÿè°ƒç”¨æ¬¡æ•°ï¼ˆæŸ¥çœ‹â€”â€”isbuff.cã€è®¾ç½®â€”â€”setbuff.cï¼‰

		+ å…¨ç¼“å†²åŒºï¼šåœ¨ç¼“å†²åŒºæ»¡æˆ–è€…è°ƒç”¨åˆ·æ–°å‡½æ•°åï¼Œè¿›è¡ŒI/Oç³»ç»Ÿè°ƒç”¨ã€‚

		+ è¡Œç¼“å†²åŒºï¼šé‡åˆ°æ¢è¡Œç¬¦æˆ–ç¼“å†²åŒºæ»¡ï¼Œæ‰I/Oç³»ç»Ÿè°ƒç”¨ã€‚

		+ æ— ç¼“å†²åŒºï¼šä¾‹å¦‚æ ‡å‡†å‡ºé”™æµã€‚

	+ **æ–‡ä»¶æè¿°ç¬¦ï¼š0ã€1ã€2**

+ **æ–‡ä»¶æè¿°ç¬¦å’Œæ–‡ä»¶æµçš„ç›¸äº’è½¬æ¢**

	+ **å‡½æ•°åï¼šfileno**

	+ å¤´æ–‡ä»¶ï¼šstdio.h

	+ åŸå‹å£°æ˜ï¼šint fileno(FILE *stream);

	+ å½¢å‚ï¼šstreamï¼šæ–‡ä»¶æµ
	
	+ è¿”å›å€¼ï¼šè°ƒç”¨æˆåŠŸï¼Œè¿”å›æ–‡ä»¶æµæ‰€ä½¿ç”¨çš„æ–‡ä»¶æè¿°ç¬¦ï¼›å¦åˆ™ï¼Œè¿”å› -1

	+ ç›¸å…³ä¾‹å­ï¼š[fileno.c]()

	---

	+ **å‡½æ•°åï¼šfdopen**

	+ å¤´æ–‡ä»¶ï¼šstdio.h

	+ åŸå‹å£°æ˜ï¼šint fdopen(int filddes, const char *mode);

	+ ä½œç”¨ï¼šåœ¨ä¸€ä¸ªå·²æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦çš„åŸºç¡€æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æµ

	+ å½¢å‚ï¼š
	
		+ fildesï¼šæ–‡ä»¶æè¿°ç¬¦

		+ modeï¼šæ‰“å¼€æ–‡ä»¶æµçš„æ¨¡å¼ä¸ fopen ä¸€æ ·
	
	+ è¿”å›å€¼ï¼šè°ƒç”¨æˆåŠŸï¼Œè¿”å›ä¸€ä¸ªæ–°çš„æ–‡ä»¶æµæŒ‡é’ˆï¼›å¦åˆ™ï¼Œè¿”å› NULL

	+ ç›¸å…³ä¾‹å­ï¼š[fdopen.c]()






> å¸¦ç¼“å†²åŒºçš„æ–‡ä»¶æ“ä½œï¼šåœ¨ç”¨æˆ·ç©ºé—´ä¸­ï¼Œè‡ªåŠ¨çš„ç”±æ“ä½œç³»ç»Ÿä¸ºä½ æ­£åœ¨ä½¿ç”¨çš„æ–‡ä»¶å¼€è¾Ÿå†…å­˜ç¼“å†²åŒº

> éç¼“å†²åŒºçš„æ–‡ä»¶æ“ä½œï¼šç”¨æˆ·åªæœ‰åœ¨éœ€è¦çš„æ—¶å€™ï¼Œè‡ªè¡Œä¸ºæ­£åœ¨ä½¿ç”¨çš„æ–‡ä»¶å¼€è¾Ÿå†…å­˜ç¼“å†²åŒº

### ğŸ’¬ POSIXä¸‹æ–‡ä»¶çš„ç³»ç»Ÿè°ƒç”¨

+ ***openç³»ç»Ÿè°ƒç”¨***

	+ ç³»ç»Ÿè°ƒç”¨åï¼šopen

	+ å¤´æ–‡ä»¶ï¼šunistd.h

	+ åŠŸèƒ½ï¼šæ‰“å¼€pathæ‰€æŒ‡çš„æ–‡ä»¶

	+ int open(const char *path, int oflags)

	+ int open(const char *path, int oflags, mode_t mode)

		+ pathï¼šæ–‡ä»¶æ‰€åœ¨è·¯å¾„

+ ***closeç³»ç»Ÿè°ƒç”¨***

	+ ç³»ç»Ÿè°ƒç”¨åï¼šclose

	+ å¤´æ–‡ä»¶ï¼š

	+ åŠŸèƒ½ï¼š

+ ***writeç³»ç»Ÿè°ƒç”¨***

	+ ç³»ç»Ÿè°ƒç”¨åï¼šwrite

	+ å¤´æ–‡ä»¶ï¼šunistd.h

	+ åŠŸèƒ½ï¼š


+ ***read***

+ ***fcntl***

	+ ç³»ç»Ÿè°ƒç”¨åï¼šfcntl

	+ å¤´æ–‡ä»¶ï¼šfcntl.h

	+ åŠŸèƒ½ï¼šä¿®æ”¹æŸä¸ªæ–‡ä»¶æè¿°ç¬¦çš„ç‰¹æ€§

	+ int fcntl(int fildes, int cmd, ...)

+ ***lseek***

+ ***lstat***

+ ***fstat***

+ ***stat***

+ ***mmap***

+ ***munmap***


<div align="center">
    - End -
</div>