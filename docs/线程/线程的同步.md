## ã€Œ çº¿ç¨‹çš„åŒæ­¥ ã€

<div align="right">
    <a href="https://github.com/fmw666/Linux#-ç›®å½•å¯¼èˆª">è¿”å›ç›®å½•å¯¼èˆª â†©</a>
</div>

+ **[äº’æ–¥é”](#-äº’æ–¥é”)**

+ **[æ¡ä»¶å˜é‡](#-æ¡ä»¶å˜é‡)**

+ **[è¯»å†™é”](#-è¯»å†™é”)**

### ğŸ’¬ äº’æ–¥é”

+ **æ¦‚å¿µ**

    + mutex äº’æ–¥é”æ˜¯ä¸€ç§ç®€å•çš„åŠ é”çš„æ–¹æ³•æ¥æ§åˆ¶å¯¹å…±äº«èµ„æºçš„è®¿é—®

    + åœ¨åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æŒæ¡æŸä¸ªäº’æ–¥ä¸Šçš„é”ï¼Œæ‹¥æœ‰ä¸Šé”çŠ¶æ€çš„çº¿ç¨‹èƒ½å¤Ÿå¯¹å…±äº«èµ„æºè¿›è¡Œè®¿é—®

    + è‹¥å…¶ä»–çº¿ç¨‹å¸Œæœ›ä¸Šé”ä¸€ä¸ªå·²ç»è¢«ä¸Šäº†äº’æ–¥é”çš„èµ„æºï¼Œåˆ™è¯¥çº¿ç¨‹æŒ‚èµ·ï¼Œç›´åˆ°ä¸Šé”çš„çº¿ç¨‹é‡Šæ”¾äº’æ–¥é”ä¸ºæ­¢
  
+ **äº’æ–¥é”çš„æ“ä½œæ­¥éª¤**

    + äº’æ–¥é”åˆå§‹åŒ–ï¼špthread_mutex_init
    
    + äº’æ–¥é”ä¸Šé”ï¼špthread_mutex_lock

    + äº’æ–¥é”è§£é”ï¼špthread_mutex_unlock

    + æ¶ˆé™¤äº’æ–¥é”ï¼špthread_mutex_destroy

+ **äº’æ–¥é”åˆå§‹åŒ–**

  + å‡½æ•°åï¼špthread_mutex_init

  + å¤´æ–‡ä»¶ï¼š

    ```c
    #include <pthread.h>
    ```

  + å‡½æ•°åŸå‹ï¼š

    ```c
    int pthread_mutex_init(pthread_mutex_t *mutex, const pthread_mutex_attr_t *mutexattr);
    ```

    + mutexï¼šäº’æ–¥é”

    + mutexattrï¼šé€šå¸¸è®¾ç½®ä¸º NULL

        + PTHREAD_MUTEX_INITIALIZERï¼šåˆ›å»ºå¿«é€Ÿäº’æ–¥é”

        + PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NPï¼šåˆ›å»ºé€’å½’äº’æ–¥é”

        + PTHREAD_REEORCHECK_MUTEX_INITIALIZER_NPï¼šåˆ›å»ºæ£€é”™äº’æ–¥é”

+ **äº’æ–¥é”æ“ä½œ**

    + å¤´æ–‡ä»¶ï¼š

        ```c
        #include <pthread.h>
        ```

    + å‡½æ•°åŸå‹ï¼š

        ```c
        int pthread_mutex_lock(pthread_mutex_t *mutex);
		int pthread_mutex_unlock(pthread_mutex_t *mutex);
		int pthread_mutex_destroy(pthread_mutex_t *mutex);
        ```

        + mutexï¼šäº’æ–¥é”

        + è¿”å›å€¼ï¼šæ‰§è¡ŒæˆåŠŸè¿”å› 0ï¼Œå‘é€é”™è¯¯è¿”å› -1

	+ ä¸¾ä¾‹ï¼š[mutex_example.c]()

### ğŸ’¬ æ¡ä»¶å˜é‡

+ å‡ºç°åŸå› 

	```c
	pthread_mutex_t work_mutex;
	int i = 3;
	int j = 7;
	```

	```c
	// thread_A					// thread_B
	pthread_lock()				pthread_lock()
	{							{
		i++;						if(i == j)
		j--;							do_something();
	}							}
	pthread_unlock();			pthread_unlock();
	```

+ åˆå§‹åŒ–æ¡ä»¶å˜é‡

	```c
	extern int pthread_cond_init(pthread_cond_t *cond, pthread_condattr_t *cond_attr);
	```

+ é”€æ¯æ¡ä»¶å˜é‡

	```c
	extern int pthread_cond_destroy(pthread_cond_t *cond);
	```

+ *åˆå§‹åŒ–æ¡ä»¶å˜é‡ä¸¾ä¾‹*

	```c
	pthread_cond_t cv;
	pthread_condattr_t cattr;
	
	int ret;
	ret = pthread_cond_init(&cv, NULL);
	ret = pthread_cond_init(&cv, &cattr);
	```

+ é€šçŸ¥æ¡ä»¶å˜é‡

	```c
	extern int pthread_cond_signal(pthread_cond_t *cond);
	```

+ ç­‰å¾…æ¡ä»¶å˜é‡

	```c
	extern int pthread_cond_wait(pthread_cond_t *cond, pthread_mutex_t *mutex);
	```

+ **ä¸¾ä¾‹**

	+ [pthread_cond_example.c]()

	+ [thread_cond.c]()

### ğŸ’¬ è¯»å†™é”

+ åŸºæœ¬åŸåˆ™ï¼š

	+ å¦‚æœæŸçº¿ç¨‹ç”³è¯·äº†è¯»é”ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥å†ç”³è¯·è¯»é”ï¼Œä½†ä¸èƒ½ç”³è¯·å†™é”

	+ å¦‚æœæŸçº¿ç¨‹ç”³è¯·äº†å†™é”ï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½ç”³è¯·è¯»é”ï¼Œä¹Ÿä¸èƒ½ç”³è¯·å†™é”

+ åˆå§‹åŒ–è¯»å†™é”

	```c
	extern int pthread_rwlock_init(pthread_rwlock_t *rwlock, pthread_rwlockattr_t *attr);
	```

+ æ³¨é”€è¯»å†™é”

	```c
	extern int pthread_rwlock_destroy(pthread_rwlock_t *rwlock);
	```

+ ç”³è¯·å†™é”

	```c
	extern int pthread_rwlock_rdlock(pthread_rwlock_t *rwlock);
	```

+ ç”³è¯·è¯»é”

	```c
	extern int pthread_rwlock_wrlock(pthread_rwlock_t *rwlock);
	```

+ è§£é”

	```c
	extern int pthread_rwlock_unlock(pthread_rwlock_t *rwlock);
	```

+ ä¸¾ä¾‹ï¼š[pthread_rwlock_example.c]()

<div align="center">
    - End -
</div>